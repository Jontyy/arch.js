/*arch.js - @jontyy - MIT licensed - https://github.com/Jontyy/arch.js*/
(function(a){"use strict",a.arch={}})(window),function(a){"use strict",a.core={}}(window.arch),function(a){"use strict";var b=0,c={},d={},e=function(a){throw new Error(a)},f=function(a,d){return b+=1,c[a]=c[a]||{},c[a][b]=d,b},g=function(b,e){var f;if(typeof d[b]=="function"&&d[b](e)===!1)return!1;if(c[b])for(f in c[b])c[b].hasOwnProperty(f)&&c[b][f].apply(a.mediator,e)};a.mediator={publish:function(a){var b,c=Array.prototype.slice.call(arguments,1);typeof a!="string"&&e("Event name must be a string."),a=a.split(" ");for(b in a)a.hasOwnProperty(b)&&a[b].length>0&&g(a[b],c)},subscribe:function(a,b){var c,d=[];typeof a!="string"&&e("Event name must be a string."),typeof b!="function"&&e("Callback must be a function."),a=a.split(" ");for(c in a)a.hasOwnProperty(c)&&a[c].length>0&&d.push(f(a[c],b));return d.length>1?d:d[0]},unsubscribe:function(a){var b;a=parseInt(a,10),isNaN(a)&&e("ID must be an integer.");for(b in c)if(c.hasOwnProperty(b)&&c[b][a])return delete c[b][a],!0;return!1},validate:function(a,b){var c;typeof a!="string"&&e("Event name must be a string."),typeof b!="function"&&e("Callback must be a function."),a=a.split(" ");for(c in a)a.hasOwnProperty(c)&&a[c].length>0&&(d[a[c]]=b)}}}(window.arch),function(a){"use strict",a.Sandbox=function(a){this.elem=a,typeof this.init=="function"&&this.init(a)},a.Sandbox.prototype=a.mediator}(window.arch),function(a){"use strict";var b={},c={},d={},e=function(a){throw new Error(a)},f=function(b){var f=d[b],g=document.getElementById(b);f=f.call(g,new a.Sandbox(g)),(typeof f!="object"||typeof f.init!="function"||typeof f.destroy!="function")&&e("Module constructor should return an object with init and destroy methods."),f.init(),c[b]=f};b.register=function(a,b){typeof a!="string"&&e("Module name must be a string."),typeof b!="function"&&e("Module constructor must be a function."),d[a]=b},b.start=function(a){var b,c,g;for(b in arguments)arguments.hasOwnProperty(b)&&(typeof arguments[b]!="string"&&e("Module names must be strings."),typeof d[arguments[b]]!="function"&&e("Module not found."),f(arguments[b]))},b.stop=function(a){var b=0,d=Array.prototype.slice.call(arguments),f=d.length;for(b;b<f;b+=1)typeof d[b]!="string"&&e("Module names must be strings."),typeof c[d[b]]=="object"&&c[d[b]].destroy()},b.startAll=function(){var a;for(a in c)c.hasOwnProperty(a)&&f(a)},b.stopAll=function(){var a;for(a in c)c.hasOwnProperty(a)&&c[a].destroy()},a.module=b}(window.arch)